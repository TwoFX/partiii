We already know that images of finitely generated ideals are finitely generated.

Conversely, suppose that $\theta(p) = Ra_1 + \cdots + Ra_n$.

If $X \in p$, then $p$ is generated by $a_1, \ldots, a_n, X$: given any $f \in p$,
we can find $g$ such that $f-Xg \in R$ and so indeed $a_i \in p$ (!) and
$f \in Ra_1 + \cdots + Ra_n + X$.

On the other hand, if $X\notin p$, let $f_1, \ldots, f_n \in p$ have constant
terms $a_1, \ldots, a_n$ (these exist by definition of $\theta$).
We will show that $p$ is generated by $f_1, \ldots, f_n$. Let $g_0 \in p$ and
let $b = \sum_{i=1}^nb_ia_i$ be the constant term of $g$, so there is
$g_1$ such that $g_0 - \sum_{i = 1}^nr_{0, i}f_i = g_1X$. We have $g_1X \in p$, but
since $p$ is prime and $X \notin p$, we have $g_1 \in p$. Continuing inductively,
we find $r_{j, i} \in R$ and $g_{j + 1} \in p$ such that
$g_{j} - \sum_{i = 1}^nr_{j, i}f_i = g_{j + 1}X$.

Define $h_j \coloneqq \sum_{i = 0}^\infty r_{i, j}X^i$. We can calculate
\begin{align*}
	\sum_{i=1}^n h_if_i
	&= \sum_{i = 1}^n\left(\sum_{j = 0}^{\infty}r_{j, i}X^j\right)f_i\\
	&= \sum_{i=1}^n\sum_{j=0}^\infty r_{j, i}f_iX^j\\
	&= \sum_{j=0}^\infty \sum_{i=1}^nr_{j, i}f_iX^j\\
	&= \sum_{j=0}^\infty X^j\sum_{i=1}^n r_{j, i}f_i\\
	&= \sum_{j=0}^\infty X^j(g_j - g_{j+1}X)\\
	&= g_0,
\end{align*}
so $g_0$ is in the span of $f_1, \ldots, f_n$ as required.
